<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Timeline ARTF</title>

  <!-- CSS oficial de TimelineJS -->
  <link title="timeline-styles" rel="stylesheet"
        href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">

  <!-- TUS ESTILOS PERSONALIZADOS -->
  <style>
    :root {
      /* Colores institucionales EXACTOS */
      --color-institucional: #691c32;      /* vino principal */
      --color-institucional-sec: #96606f;  /* derivado que combine */
      --color-link: #96606f;               /* color de links en texto */
    }

    /* ========= CUADROS DE EVENTOS (TIMENAV) ========= */
    .tl-timemarker-content-container,
    .tl-timemarker-content-container-long,
    .tl-timemarker-content-container-small {
      background-color: var(--color-institucional);
      color: #ffffff;
      border-radius: 4px;
      border: 1px solid rgba(0,0,0,0.15);
    }

    /* EVENTOS QUE TIENEN RANGO (with-end) */
    .tl-timemarker.tl-timemarker-with-end
      .tl-timemarker-content-container,
    .tl-timemarker.tl-timemarker-with-end
      .tl-timemarker-content-container-long,
    .tl-timemarker.tl-timemarker-with-end
      .tl-timemarker-content-container-small {
      background-color: var(--color-institucional-sec);
    }

    /* ========= LINKS DENTRO DEL TEXTO DE LAS DIAPOSITIVAS ========= */
    .tl-slide .tl-text-content a {
      color: var(--color-link);
      text-decoration: none;
      font-weight: 600;
      border-bottom: 1px dashed var(--color-link);
    }

    .tl-slide .tl-text-content a:hover {
      text-decoration: underline;
    }

    /* ========= ACORDEONES (LISTAS DESPLEGABLES) ========= */

    /* Contenedor general del acordeón */
    .tl-slide .tl-text-content .accordion {
      margin: 0.4em 0 0.6em 0;
    }

    /* Cabecera clicable (el "botón") */
    .tl-slide .tl-text-content .accordion-summary {
      cursor: pointer;
      font-weight: 600;
      padding: 0.25em 0.6em;
      border-radius: 4px;
      display: inline-block;
      background: var(--color-institucional-sec);
      color: #ffffff;
      user-select: none;
    }

    /* Cuerpo con la lista que se abre/cierra */
    .tl-slide .tl-text-content .accordion-body {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(-4px);
      transition:
        max-height 0.35s ease,
        opacity 0.35s ease,
        transform 0.35s ease;
      margin-top: 0.25em;
    }

    /* Cuando el acordeón está abierto */
    .tl-slide .tl-text-content .accordion.is-open .accordion-body {
      max-height: 500px; /* súbelo si llegas a tener listas muy largas */
      opacity: 1;
      transform: translateY(0);
    }

    /* Listas internas un poquito sangradas */
    .tl-slide .tl-text-content .accordion-body ul {
      margin: 0.3em 0 0 1.2em;
      padding-left: 0;
    }

    .tl-credit{
      display:none;
    }
    .tl-caption{
      display:none;
    }
    .tl-timeline h2.tl-headline-title {
      white-space: nowrap;
    }

  </style>
</head>
<body>
  <!-- Aquí se dibuja la timeline -->
  <div id="timeline-embed" style="width:100%; height:650px;"></div>

  <!-- JS de TimelineJS -->
  <script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>
  <script>
    // Nuevo "source" tomado del iframe que me pasaste (ya decodificado)
    var source = "v2:2PACX-1vT0TsAEmGMD1pFz4aerLnKBQs79ECB5-GLLaBS9fRdRYAhm-gJbJ3kwZiiCRzGofObbSl-m0xulBiPK";

    // Crear timeline en el div "timeline-embed"
    window.timeline = new TL.Timeline("timeline-embed", source, {
      language: "es",
      initial_zoom: 0,
      font: "Default"
    });

    // ========= LÓGICA DEL ACORDEÓN (TRANSICIÓN SUAVE) =========
    // Usamos delegación de eventos para que funcione aunque TimelineJS reprocesa el DOM
    document.addEventListener('click', function (e) {
      const summary = e.target.closest('.accordion-summary');
      if (!summary) return; // Si no hizo click en un summary, salir

      // Si hizo click en un enlace dentro del summary, dejamos que el link trabaje normal
      if (e.target.tagName === 'A') {
        return;
      }

      const accordion = summary.closest('.accordion');
      if (!accordion) return;

      accordion.classList.toggle('is-open');
    });
  </script>
</body>
</html>

